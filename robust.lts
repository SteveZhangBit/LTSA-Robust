/**
 * Protocol to send and receive message through two robust channels.
 */
INPUT = (input -> send -> getack -> INPUT).

OUTPUT = (rec -> output -> ack -> OUTPUT).

||SYS = (INPUT || OUTPUT)
      / {e.trans.in/send, e.trans.out/rec, e.ack.in/ack, e.ack.out/getack}.

CHANNEL = (in -> out -> CHANNEL)+{lose}.

||ENV = (e.trans:CHANNEL || e.ack:CHANNEL).

property P = (input -> output -> P).

||TEST = (SYS || ENV || P)@{input, output}.