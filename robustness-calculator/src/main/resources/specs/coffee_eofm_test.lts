COFFEE_MACHINE = Run[True],
Run[iHandleDown:TBool] = (
    when (iHandleDown == True) hLiftHandle -> Run[False]
  | when (iHandleDown == False) hLowerHandle -> Run[True]
  | when (iHandleDown == True) hPressBrew -> mBrew -> Brewing
  | when (iHandleDown == False) hPressBrew -> Run[iHandleDown]
),
Brewing = (mBrew -> Brewing | mBrewDone -> Run[True]).


WORLD = R[False][Absent][True][EmptyOrUsed],
R[iBrewing:TBool][iMugState:TMugState][iHandleDown:TBool][iPodState:TPodState] = (
      when (!(iPodState == New)) mBrew -> sys -> set_iBrewing[True] -> human -> R[True][iMugState][iHandleDown][iPodState]
    | when (!(iMugState == Empty)) mBrewDone -> sys -> set_iBrewing[False] -> human -> R[False][iMugState][iHandleDown][iPodState]
    | when (iMugState == Absent) hPlaceMug -> sys -> set_iMugState[Empty] -> human -> R[iBrewing][Empty][iHandleDown][iPodState]
    | when (iMugState != Absent) hTakeMug -> sys -> set_iMugState[Absent] -> human -> R[iBrewing][Absent][iHandleDown][iPodState]
    | when (iMugState == Empty) mBrewDone -> sys -> set_iBrewing[False] -> set_iMugState[Full] -> human -> R[False][Full][iHandleDown][iPodState]
    | when (iHandleDown == False) hLowerHandle -> sys -> set_iHandleDown[True] -> human -> R[iBrewing][iMugState][True][iPodState]
    | when (iHandleDown == True) hLiftHandle -> sys -> set_iHandleDown[False] -> human -> R[iBrewing][iMugState][False][iPodState]
    | when (iPodState == New) mBrew -> sys -> set_iBrewing[True] -> set_iPodState[EmptyOrUsed] -> human -> R[True][iMugState][iHandleDown][EmptyOrUsed]
    | when (iPodState == EmptyOrUsed) hAddOrReplacePod -> sys -> set_iPodState[New] -> human -> R[iBrewing][iMugState][iHandleDown][New]
).


property P = (hPlaceMug -> MugPlaced | hTakeMug -> P | mBrewDone -> P),
MugPlaced = (mBrew -> Brewing | hTakeMug -> P | mBrewDone -> MugPlaced | hPlaceMug -> MugPlaced),
Brewing = (mBrewDone -> MugPlaced | mBrew -> Brewing | hPlaceMug -> Brewing).

||T = (WORLD || COFFEE_MACHINE || ABrewCoffee || P).